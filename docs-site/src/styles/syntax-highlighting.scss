// Syntax Highlighting Themes
// Theme-aware code syntax highlighting with enhanced support

// Base syntax highlighting styles
.hljs {
    background: var(--code-bg) !important;
    color: var(--code-text) !important;
    padding: 1rem;
    border-radius: 0.375rem;
    overflow-x: auto;
    font-family: var(--font-family-mono);
    font-size: 0.875rem;
    line-height: 1.5;
    transition: background-color var(--transition-fast), color var(--transition-fast);

    // Keywords (if, else, function, class, etc.)
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-built_in,
    .hljs-name,
    .hljs-tag {
        color: var(--syntax-keyword) !important;
        font-weight: 600;
    }

    // Strings and attributes
    .hljs-string,
    .hljs-attr,
    .hljs-template-variable,
    .hljs-template-tag,
    .hljs-addition {
        color: var(--syntax-string) !important;
    }

    // Numbers and literals
    .hljs-number,
    .hljs-literal,
    .hljs-variable,
    .hljs-subst {
        color: var(--syntax-number) !important;
    }

    // Comments
    .hljs-comment,
    .hljs-quote,
    .hljs-deletion {
        color: var(--syntax-comment) !important;
        font-style: italic;
    }

    // Functions and methods
    .hljs-function,
    .hljs-title,
    .hljs-section,
    .hljs-attribute {
        color: var(--syntax-function) !important;
        font-weight: 600;
    }

    // Types and classes
    .hljs-type,
    .hljs-class,
    .hljs-symbol,
    .hljs-bullet,
    .hljs-meta {
        color: var(--primary) !important;
    }

    // Operators and punctuation
    .hljs-operator,
    .hljs-punctuation {
        color: var(--text-primary) !important;
    }

    // Emphasis and strong
    .hljs-emphasis {
        font-style: italic;
    }

    .hljs-strong {
        font-weight: bold;
    }

    // Links in code
    .hljs-link {
        color: var(--primary) !important;
        text-decoration: underline;
    }
}

// Language-specific adjustments
.hljs.language-javascript,
.hljs.language-typescript {
    .hljs-title.function_ {
        color: var(--syntax-function) !important;
    }

    .hljs-variable.language_ {
        color: var(--syntax-keyword) !important;
    }
}

.hljs.language-css {

    .hljs-selector-class,
    .hljs-selector-id {
        color: var(--syntax-function) !important;
    }

    .hljs-property {
        color: var(--primary) !important;
    }

    .hljs-value {
        color: var(--syntax-string) !important;
    }
}

.hljs.language-html,
.hljs.language-xml {
    .hljs-tag {
        color: var(--syntax-keyword) !important;
    }

    .hljs-name {
        color: var(--syntax-function) !important;
    }

    .hljs-attr {
        color: var(--primary) !important;
    }
}

.hljs.language-json {
    .hljs-attr {
        color: var(--syntax-function) !important;
    }

    .hljs-string {
        color: var(--syntax-string) !important;
    }

    .hljs-number {
        color: var(--syntax-number) !important;
    }

    .hljs-literal {
        color: var(--syntax-keyword) !important;
    }
}

.hljs.language-bash,
.hljs.language-shell {
    .hljs-built_in {
        color: var(--syntax-function) !important;
    }

    .hljs-variable {
        color: var(--syntax-number) !important;
    }
}

// Inline code styling
code:not(.hljs) {
    background: var(--code-bg);
    color: var(--code-text);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: var(--font-family-mono);
    font-size: 0.875em;
    border: 1px solid var(--code-border);
    transition: background-color var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
}

// Code block container
pre {
    background: var(--code-bg);
    border: 1px solid var(--code-border);
    border-radius: 0.5rem;
    margin: 1.5rem 0;
    overflow: hidden;
    transition: background-color var(--transition-fast), border-color var(--transition-fast);

    code {
        background: none;
        border: none;
        padding: 0;
        border-radius: 0;
        display: block;
        overflow-x: auto;
    }
}

// Copy button for code blocks
.code-block-container {
    position: relative;

    .copy-button {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
        font-size: 0.75rem;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all var(--transition-fast);
        opacity: 0.8;
        backdrop-filter: blur(4px);

        &:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            opacity: 1;
            transform: translateY(-1px);
        }

        &:focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        &.copied {
            background: var(--success-light);
            color: var(--success);
            border-color: var(--success);
            opacity: 1;
        }

        // Icon styling
        svg {
            width: 14px;
            height: 14px;
            margin-right: 0.25rem;
        }
    }

    // Show copy button on hover
    &:hover .copy-button {
        opacity: 1;
    }
}

// Diff highlighting
.hljs-addition {
    background-color: rgba(34, 197, 94, 0.1);
    color: var(--success) !important;
}

.hljs-deletion {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--error) !important;
}

// Line numbers
.hljs-ln-numbers {
    color: var(--text-tertiary) !important;
    border-right: 1px solid var(--border);
    padding-right: 0.75rem;
    margin-right: 0.75rem;
    user-select: none;
}

.hljs-ln-code {
    padding-left: 0.75rem;
}

// Highlighted lines
.hljs-ln-line.highlighted {
    background-color: rgba(59, 130, 246, 0.1);
    border-left: 3px solid var(--primary);
    padding-left: calc(0.75rem - 3px);
    transition: background-color var(--transition-fast);
}

// Theme-specific syntax highlighting enhancements
[data-resolved-theme="dark"] {
    .hljs {

        // Enhanced dark theme syntax colors
        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-built_in,
        .hljs-name,
        .hljs-tag {
            color: #c792ea !important; // Purple
        }

        .hljs-string,
        .hljs-attr,
        .hljs-template-variable,
        .hljs-template-tag,
        .hljs-addition {
            color: #c3e88d !important; // Green
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-subst {
            color: #f78c6c !important; // Orange
        }

        .hljs-comment,
        .hljs-quote,
        .hljs-deletion {
            color: #546e7a !important; // Gray
        }

        .hljs-function,
        .hljs-title,
        .hljs-section,
        .hljs-attribute {
            color: #82aaff !important; // Blue
        }
    }

    .hljs-ln-line.highlighted {
        background-color: rgba(130, 170, 255, 0.15);
    }
}

[data-resolved-theme="light"] {
    .hljs {

        // Enhanced light theme syntax colors
        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-built_in,
        .hljs-name,
        .hljs-tag {
            color: #7c3aed !important; // Purple
        }

        .hljs-string,
        .hljs-attr,
        .hljs-template-variable,
        .hljs-template-tag,
        .hljs-addition {
            color: #059669 !important; // Green
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-subst {
            color: #dc2626 !important; // Red
        }

        .hljs-comment,
        .hljs-quote,
        .hljs-deletion {
            color: #6b7280 !important; // Gray
        }

        .hljs-function,
        .hljs-title,
        .hljs-section,
        .hljs-attribute {
            color: #2563eb !important; // Blue
        }
    }

    .hljs-ln-line.highlighted {
        background-color: rgba(59, 130, 246, 0.1);
    }
}

// Code block title bar
.code-block-header {
    background: var(--bg-tertiary);
    border-bottom: 1px solid var(--code-border);
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color var(--transition-fast), border-color var(--transition-fast);

    .language-label {
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .file-name {
        font-family: var(--font-family-mono);
        color: var(--text-primary);
    }
}

// Enhanced code block styling
.enhanced-code-block {
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    transition: box-shadow var(--transition-fast);

    &:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    pre {
        margin: 0;
        border: none;
        border-radius: 0;
    }
}